@using Shop.Models

@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Administrator/Views/Shared/_LayoutAdministrator.cshtml";
    HomeModel home = new HomeModel();
}

<!-- Favicon -->
<link rel="shortcut icon" href="~/Areas/Administrator/Data/assets/images/logo/favicon.png">

<!-- page css -->
<!-- Core css -->
<link href="~/Areas/Administrator/Data/assets/css/app.min.css" rel="stylesheet">

<!-- Custom CSS cho hiệu ứng đẹp hơn -->
<style>
    /* Giữ nguyên độ mờ backdrop của modal */
    .modal-backdrop {
        opacity: 0.3 !important;
    }

    /* Hiệu ứng hover phóng to nhẹ cho các thẻ chứa class .dienthoaizoom */
    .dienthoaizoom {
        transition: transform 0.3s ease-in-out;
        cursor: pointer;
    }

        .dienthoaizoom:hover {
            transform: scale(1.02);
        }

    /* Tăng bo góc, thêm bóng đổ cho .card */
    .card.dienthoaizoom {
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    /* Tăng bo góc, thêm bóng đổ cho phần nội dung modal */
    .modal-content {
        border-radius: 8px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    }

    /* Tinh chỉnh khung sticky-sidebar */
    .sticky-sidebar.active {
        background: rgba(255, 255, 255, 0.6);
        border-radius: 12px;
        padding: 8px;
    }

    /* Chỉnh icon đóng modal */
    .close i.anticon-close {
        font-size: 1.3rem;
        transition: color 0.2s;
    }

        .close i.anticon-close:hover {
            color: red;
        }

    /* Badge chấm màu (chỉ để minh họa) */
    .badge-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        margin-right: 5px;
    }
</style>

@Html.Partial("_MessageAlert")

<!-- Button trigger modal -->
<div class="sticky-sidebar active">
    <div class="bannner dienthoaizoom">
        <button type="button" style="border: none;" data-toggle="modal" data-target="#exampleModalCenter">
            <img src="~/Content/images/dashboard-session.png" alt="Alternate Text" width="79" height="79" />
        </button>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" style="vertical-align: middle; margin: 20px; background-color: transparent;">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalCenterTitle">Hệ thống</h5>
                <button type="button" class="close" data-dismiss="modal">
                    <i class="anticon anticon-close"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md" style="background-color: #EAF2FF;color: blue; font-weight: bold; border-radius: 12px;padding: 18px;margin:18px;">
                        <p style="font-weight: bold; color: red;font-size: 2rem;">
                            @ViewBag.Online
                            <img src="~/Content/images/user.png" alt="Alternate Text" height="60" width="60" style="margin-left:80px;" />
                        </p>
                        Đang Online
                    </div>
                    <div class="col-md" style="background-color: #b3eae0;color: green;font-weight: bold; border-radius: 12px;padding: 18px;margin:18px;">
                        <p style="font-weight: bold; color: red;font-size: 2rem;">
                            @ViewBag.SoNguoiTruyCap
                            <img src="~/Content/images/fairy.png" alt="Alternate Text" height="60" width="60" style="margin-left:80px;" />
                        </p>
                        Truy cập Website
                    </div>
                    <div class="col-md" style="background-color: #b3eae0;color: green;font-weight: bold; border-radius: 12px;padding: 18px;margin:18px;">
                        <p style="font-weight: bold; color: red;font-size: 2rem;">
                            @home.CountInvoiceCancel()
                            <img src="~/Areas/Administrator/Data/images/invoice-cance-list.png" alt="Alternate Text" height="60" width="60" style="margin-left:80px;" />
                        </p>
                        Đơn hàng đã hủy
                    </div>
                </div>
                <div class="row">
                    <div class="col-md" style="background-color: #EAF2FF;color: blue; font-weight: bold; border-radius: 12px;padding: 18px;margin:18px;">
                        <p style="font-weight: bold; color: red;font-size: 2rem;">
                            @home.DemDienthoaiMoiNhat()
                            <img src="~/Content/images/1832779.png" alt="Alternate Text" height="60" width="60" style="margin-left:80px;" />
                        </p>
                        Điện thoại mới nhập <i class="fa fa-eye"></i>
                    </div>
                    <div class="col-md" style="background-color: #e3fce2;color: green;font-weight: bold; border-radius: 12px;padding: 18px;margin:18px;">
                        <p style="font-weight: bold; color: red;font-size: 2rem;">
                            @home.DemDienthoaiGiaRe()
                            <img src="~/Content/images/4605894.png" alt="Alternate Text" height="60" width="60" style="margin-left:80px;" />
                        </p>
                        Điện thoại giá rẻ (<= 15tr) <i class="fa fa-eye"></i>
                    </div>
                    <div class="col-md" style="background-color: #b8f1f7;color: blue; font-weight: bold; border-radius: 12px;padding: 18px;margin:18px;">
                        <p style="font-weight: bold; color: red;font-size: 2rem;">
                            2
                            <img src="~/Content/images/13368169.png" alt="Alternate Text" height="60" width="60" style="margin-left:80px;" />
                        </p>
                        Điện thoại bán chạy <i class="fa fa-eye"></i>
                    </div>
                    <div class="col-md" style="background-color: #fcfcde;color: green;font-weight: bold; border-radius: 12px;padding: 18px;margin:18px;">
                        <p style="font-weight: bold; color: red;font-size: 2rem;">
                            3
                            <img src="~/Content/images/17331186.png" alt="Alternate Text" height="60" width="60" style="margin-left:80px;" />
                        </p>
                        Đánh giá nhiều <i class="fa fa-eye"></i>
                    </div>
                    <div class="col-md" style="background-color: #fce5fa;color: blue;font-weight: bold; border-radius: 12px;padding: 18px;margin:18px;">
                        <p style="font-weight: bold; color: red;font-size: 2rem;">
                            @home.DemDienthoaiGiaCao()
                            <img src="~/Content/images/images (1).png" alt="Alternate Text" height="60" width="60" style="margin-left:80px;" />
                        </p>
                        Điện thoại giá cao (>= 30tr) <i class="fa fa-eye"></i>
                    </div>
                    <div class="col-md" style="background-color: #fbf1e8;color: green;font-weight: bold; border-radius: 12px;padding: 18px;margin:18px;">
                        <p style="font-weight: bold; color: red;font-size: 2rem;">
                            7
                            <img src="~/Content/images/images.png" alt="Alternate Text" height="60" width="60" style="margin-left:80px;" />
                        </p>
                        Cấu hình khủng <i class="fa fa-eye"></i>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-success" data-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div>

<!-- Page Container START -->
<div class="container" style="margin-top: 10px;">
    <!-- Content Wrapper START -->
    <div class="main-content">
        <div class="row">
            <div class="col-md-6 col-lg-3">
                <div class="card dienthoaizoom">
                    <div class="card-body">
                        <div class="media align-items-center">
                            <div class="avatar avatar-icon avatar-lg avatar-blue">
                                <i class="anticon anticon-dollar"></i>
                            </div>
                            <div class="m-l-15">
                                <h3 class="m-b-0">@home.LoiNhuan().ToString("#,##")</h3>
                                <p class="m-b-0 text-muted">Lợi nhuận (VNĐ)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="card dienthoaizoom">
                    <div class="card-body">
                        <div class="media align-items-center">
                            <div class="avatar avatar-icon avatar-lg avatar-cyan">
                                <i class="anticon anticon-dienthoai"></i>
                            </div>
                            <div class="m-l-15">
                                <h2 class="m-b-0">@home.DemSanPhamBan().ToString("#,##")</h2>
                                <p class="m-b-0 text-muted">Điện thoại</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="card dienthoaizoom">
                    <div class="card-body">
                        <div class="media align-items-center">
                            <div class="avatar avatar-icon avatar-lg avatar-gold">
                                <i class="anticon anticon-profile"></i>
                            </div>
                            <div class="m-l-15">
                                <h3 class="m-b-0">@home.DemHoaDon().ToString("#,##")</h3>
                                <p class="m-b-0 text-muted">Đơn đặt hàng</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="card dienthoaizoom">
                    <div class="card-body">
                        <div class="media align-items-center">
                            <div class="avatar avatar-icon avatar-lg avatar-purple">
                                <i class="anticon anticon-user"></i>
                            </div>
                            <div class="m-l-15">
                                <h3 class="m-b-0">@home.DemKhachHang().ToString("#,##")</h3>
                                <p class="m-b-0 text-muted">Khách hàng</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TOP 4 ĐIỆN THOẠI BÁN CHẠY -->
        <div class="row">
            <div class="col-md-12 col-lg-8">
                <div class="card dienthoaizoom">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5>Top 4 điện thoại bán chạy</h5>
                            @* Có thể mở rộng tùy chọn hiển thị theo tháng/năm, v.v. *@
                        </div>
                        <div class="m-t-30" style="height: 345px; margin-top: 5px;">
                            <!--
                                Thay thế chart (nếu muốn) hoặc hiển thị table
                                Dưới đây là table ví dụ demo
                            -->
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Điện thoại</th>
                                            <th>Bán</th>
                                            <th>Doanh số</th>
                                            <th style="max-width: 70px">Hàng còn lại</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <div class="media align-items-center">
                                                    <div class="avatar avatar-image rounded">
                                                        <img src="~/Areas/Administrator/Data/assets/images/others/thumb-9.jpg" alt="">
                                                    </div>
                                                    <div class="m-l-10">
                                                        <span>Gray Sofa</span>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>81</td>
                                            <td>$1,912.00</td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="progress progress-sm w-100 m-b-0">
                                                        <div class="progress-bar bg-success" style="width: 82%"></div>
                                                    </div>
                                                    <div class="m-l-10">
                                                        82
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="media align-items-center">
                                                    <div class="avatar avatar-image rounded">
                                                        <img src="~/Areas/Administrator/Data/assets/images/others/thumb-10.jpg" alt="">
                                                    </div>
                                                    <div class="m-l-10">
                                                        <span>Gray Sofa</span>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>26</td>
                                            <td>$1,377.00</td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="progress progress-sm w-100 m-b-0">
                                                        <div class="progress-bar bg-success" style="width: 61%"></div>
                                                    </div>
                                                    <div class="m-l-10">
                                                        61
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="media align-items-center">
                                                    <div class="avatar avatar-image rounded">
                                                        <img src="~/Areas/Administrator/Data/assets/images/others/thumb-11.jpg" alt="">
                                                    </div>
                                                    <div class="m-l-10">
                                                        <span>Wooden Rhino</span>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>71</td>
                                            <td>$9,212.00</td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="progress progress-sm w-100 m-b-0">
                                                        <div class="progress-bar bg-danger" style="width: 23%"></div>
                                                    </div>
                                                    <div class="m-l-10">
                                                        23
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="media align-items-center">
                                                    <div class="avatar avatar-image rounded">
                                                        <img src="~/Areas/Administrator/Data/assets/images/others/thumb-12.jpg" alt="">
                                                    </div>
                                                    <div class="m-l-10">
                                                        <span>Red Chair</span>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>79</td>
                                            <td>$1,298.00</td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="progress progress-sm w-100 m-b-0">
                                                        <div class="progress-bar bg-warning" style="width: 54%"></div>
                                                    </div>
                                                    <div class="m-l-10">
                                                        54
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div> <!-- end .table-responsive -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Số liệu (biểu đồ tròn và 3 badge) -->
            <div class="col-md-12 col-lg-4">
                <div class="card dienthoaizoom">
                    <div class="card-body">
                        <h5 class="m-b-0">Số liệu</h5>
                        <div class="m-v-60 text-center" style="height: 200px">
                            <canvas class="chart" id="customers-chart"></canvas>
                        </div>
                        <div class="row border-top p-t-25">
                            <div class="col-4">
                                <div class="d-flex justify-content-center">
                                    <div class="media align-items-center">
                                        <span class="badge badge-success badge-dot m-r-10"></span>
                                        <div class="m-l-5">
                                            <h4 class="m-b-0">@home.CountPost()</h4>
                                            <p class="m-b-0 muted">Bài viết</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="d-flex justify-content-center">
                                    <div class="media align-items-center">
                                        <span class="badge badge-secondary badge-dot m-r-10"></span>
                                        <div class="m-l-5">
                                            <h4 class="m-b-0">@home.CountComment()</h4>
                                            <p class="m-b-0 muted">Comments</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="d-flex justify-content-center">
                                    <div class="media align-items-center">
                                        <span class="badge badge-warning badge-dot m-r-10"></span>
                                        <div class="m-l-5">
                                            <h4 class="m-b-0">@home.CountDanhGia()</h4>
                                            <p class="m-b-0 muted">Vote</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> <!-- end .row -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Biểu đồ doanh thu -->
        <div class="row">
            <div class="col-lg-8">
                <div class="card dienthoaizoom">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5>Doanh thu</h5>
                        </div>
                        <div class="m-t-50" style="height: 240px">
                            <canvas class="chart" id="revenue-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nếu muốn hiển thị "Top 4 Khách VIP", gỡ bỏ comment đoạn code sau:
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5>Top 4 Khách VIP</h5>
                            <div>
                                <a href="javascript:void(0);" class="btn btn-sm btn-default">View All</a>
                            </div>
                        </div>
                        <div class="m-t-30">
                            <ul class="list-group list-group-flush">
                                foreach (var item in home.GET_TOP_4_USERS_VIP())
                                {
                                    <li class="list-group-item p-h-0">
                                        <div class="d-flex align-items-center justify-content-between">
                                            <div class="d-flex">
                                                <div class="avatar avatar-image m-r-15">
                                                    <img src="~/Areas/Administrator/Data/assets/images/others/thumb-9.jpg" alt="">
                                                </div>
                                                <div>
                                                    <h6 class="m-b-0">
                                                        <a href="javascript:void(0);" class="text-dark"> Gray Sofa</a>
                                                    </h6>
                                                    <span class="text-muted font-size-13">Home Decoration</span>
                                                </div>
                                            </div>
                                            <span class="badge badge-pill badge-cyan font-size-12">
                                                <span class="font-weight-semibold m-l-5">+18.3%</span>
                                            </span>
                                        </div>
                                    </li>
                                }
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            -->
        </div>
    </div>
    <!-- Content Wrapper END -->
    <!-- Footer START -->
    <footer class="footer" style="margin-top: 100px;">
        <div class="footer-content">
            <!--
            <p class="m-b-0">
                Copyright © ...
            </p>
            -->
            <span>
                <a href="" class="text-gray m-r-15">Term &amp; Conditions</a>
                <a href="" class="text-gray">Privacy &amp; Policy</a>
            </span>
        </div>
    </footer>
    <!-- Footer END -->
</div>
<!-- Page Container END -->
<!-- Core Vendors JS -->
<script src="~/Areas/Administrator/Data/assets/js/vendors.min.js"></script>

<!-- page js -->
<script src="~/Areas/Administrator/Data/assets/vendors/chartjs/Chart.min.js"></script>
<script src="~/Areas/Administrator/Data/assets/js/pages/dashboard-default.js"></script>

<!-- Core JS -->
<script src="~/Areas/Administrator/Data/assets/js/app.min.js"></script>
<script src="~/Areas/Administrator/Data/assets/vendors/chartjs/Chart.min.js"></script>
<script src="~/Areas/Administrator/Data/assets/js/pages/dashboard-e-commerce.js"></script>

<!-- DEMO Chart -->
<script>
    // Ví dụ cho chart Bar (nếu có bar-chart trong giao diện)
    // Bạn có thể thay đổi data, label,... tùy ý
    // Chú ý: kiểm tra element có tồn tại trên giao diện không
    const barChart = document.getElementById("bar-chart");
    if (barChart) {
        const barCtx = barChart.getContext('2d');
        barChart.height = 120;
        new Chart(barCtx, {
            type: 'bar',
            data: {
                labels: ['2011', '2012', '2013', '2014', '2015', '2016', '2017', '2018'],
                datasets: [{
                    label: 'Series A',
                    backgroundColor: '#3366FF',  // màu xanh
                    borderWidth: 0,
                    data: [56, 55, 40, 37, 54, 76, 63, 62]
                },
                {
                    label: 'Series B',
                    backgroundColor: '#99BBFF', // màu xanh nhạt
                    borderWidth: 0,
                    data: [86, 27, 90, 43, 65, 76, 87, 85]
                }]
            },
            options: {
                scaleShowVerticalLines: false,
                responsive: true,
                scales: {
                    xAxes: [{
                        categoryPercentage: 0.45,
                        barPercentage: 0.70,
                        display: true,
                        scaleLabel: {
                            display: false
                        },
                        gridLines: false,
                        ticks: {
                            display: true,
                            beginAtZero: true,
                            fontSize: 13,
                            padding: 10
                        }
                    }],
                    yAxes: [{
                        categoryPercentage: 0.35,
                        barPercentage: 0.70,
                        display: true,
                        scaleLabel: {
                            display: false
                        },
                        gridLines: {
                            drawBorder: false,
                            offsetGridLines: false,
                            drawTicks: false,
                            borderDash: [3, 4],
                            zeroLineWidth: 1,
                            zeroLineBorderDash: [3, 4]
                        },
                        ticks: {
                            max: 100,
                            stepSize: 20,
                            display: true,
                            beginAtZero: true,
                            fontSize: 13,
                            padding: 10
                        }
                    }]
                }
            }
        });
    }
</script>
